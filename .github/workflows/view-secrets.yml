# .github/workflows/view-secrets.yml

name: Show Me the Secrets

on:
  workflow_dispatch:  # Trigger manually from GitHub UI

jobs:
  debug:
    name: View Secrets via SSH
    runs-on: ubuntu-latest
    timeout-minutes: 60  # optional: auto-timeout

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Write secrets to file
        env:
          TF_NODE_ENV: ${{ secrets.TF_NODE_ENV }}
          TF_PORT: ${{ secrets.TF_PORT }}
          TF_HOST: ${{ secrets.TF_HOST }}
          TF_JWT_SECRET: ${{ secrets.TF_JWT_SECRET }}
          TF_JWT_REFRESH_SECRET: ${{ secrets.TF_JWT_REFRESH_SECRET }}
          TF_JWT_ACCESS_TOKEN_EXPIRATION: ${{ secrets.TF_JWT_ACCESS_TOKEN_EXPIRATION }}
          TF_JWT_REFRESH_TOKEN_EXPIRATION: ${{ secrets.TF_JWT_REFRESH_TOKEN_EXPIRATION }}
          TF_RPC_URL: ${{ secrets.TF_RPC_URL }}
          TF_WALLET_PRIVATE_KEY: ${{ secrets.TF_WALLET_PRIVATE_KEY }}
          TF_NFT_CONTRACT_ADDRESS: ${{ secrets.TF_NFT_CONTRACT_ADDRESS }}
          TF_OPENAI_API_ENDPOINT: ${{ secrets.TF_OPENAI_API_ENDPOINT }}
          TF_OPENAI_API_KEY: ${{ secrets.TF_OPENAI_API_KEY }}
          TF_ADMIN_EMAIL: ${{ secrets.TF_ADMIN_EMAIL }}
          TF_ADMIN_PASSWORD: ${{ secrets.TF_ADMIN_PASSWORD }}
          TF_ADMIN_USERNAME: ${{ secrets.TF_ADMIN_USERNAME }}
          TF_SALT_ROUNDS: ${{ secrets.TF_SALT_ROUNDS }}
        run: |
          echo "🔐 Dumping secrets to secrets.txt..."
          echo "TF_NODE_ENV=$TF_NODE_ENV" >> secrets.txt
          echo "TF_PORT=$TF_PORT" >> secrets.txt
          echo "TF_HOST=$TF_HOST" >> secrets.txt
          echo "TF_JWT_SECRET=$TF_JWT_SECRET" >> secrets.txt
          echo "TF_JWT_REFRESH_SECRET=$TF_JWT_REFRESH_SECRET" >> secrets.txt
          echo "TF_JWT_ACCESS_TOKEN_EXPIRATION=$TF_JWT_ACCESS_TOKEN_EXPIRATION" >> secrets.txt
          echo "TF_JWT_REFRESH_TOKEN_EXPIRATION=$TF_JWT_REFRESH_TOKEN_EXPIRATION" >> secrets.txt
          echo "TF_RPC_URL=$TF_RPC_URL" >> secrets.txt
          echo "TF_WALLET_PRIVATE_KEY=$TF_WALLET_PRIVATE_KEY" >> secrets.txt
          echo "TF_NFT_CONTRACT_ADDRESS=$TF_NFT_CONTRACT_ADDRESS" >> secrets.txt
          echo "TF_OPENAI_API_ENDPOINT=$TF_OPENAI_API_ENDPOINT" >> secrets.txt
          echo "TF_OPENAI_API_KEY=$TF_OPENAI_API_KEY" >> secrets.txt
          echo "TF_ADMIN_EMAIL=$TF_ADMIN_EMAIL" >> secrets.txt
          echo "TF_ADMIN_PASSWORD=$TF_ADMIN_PASSWORD" >> secrets.txt
          echo "TF_ADMIN_USERNAME=$TF_ADMIN_USERNAME" >> secrets.txt
          echo "TF_SALT_ROUNDS=$TF_SALT_ROUNDS"

      - name: Start tmate session
        uses: mxschmitt/action-tmate@v2
